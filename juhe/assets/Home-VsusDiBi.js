import{r as p,o as ue,w as ae,b as W,_ as q,d as T,i as X,u as te,t as Le,c as O,a as Te,e as se,f as oe,g as y,h as H,j as z,k as F,l as L,n as B,m as h,p as ne,v as ce,T as de,q as we,s as C,x as E,F as A,y as $e,z as j,A as pe,B as Ne,C as G,D as Be,E as Se,G as Pe,H as re,I as Ae,J as ve,K as fe,L as ke,M as He,N as Z,O as _e,P as Re,Q as Ie,R as Oe,S as Me,U as Ve,V,W as J,X as Ee,Y as D,Z as he,$ as De,a0 as je,a1 as ie,a2 as I,a3 as Q,a4 as ze,a5 as We,a6 as N,a7 as qe,a8 as Ke,a9 as Ue,aa as K,ab as Ye,ac as Xe}from"./index-DdVnolt6.js";/* empty css                 *//* empty css                  */import{E as Fe,a as Ge}from"./el-link-DYzylA4c.js";import{_ as Ze,E as Je}from"./_plugin-vue_export-helper-85sielkl.js";const Qe=(a,e=0)=>{if(e===0)return a;const t=p(!1);let l=0;const n=()=>{l&&clearTimeout(l),l=window.setTimeout(()=>{t.value=a.value},e)};return ue(n),ae(()=>a.value,s=>{s?n():t.value=s}),t},R=4,et={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},tt=({move:a,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${a}%)`}),me=Symbol("scrollbarContextKey"),lt=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),at="Thumb",st=T({__name:"thumb",props:lt,setup(a){const e=a,t=X(me),l=te("scrollbar");t||Le(at,"can not inject scrollbar context");const n=p(),s=p(),u=p({}),f=p(!1);let c=!1,m=!1,g=we?document.onselectstart:null;const i=O(()=>et[e.vertical?"vertical":"horizontal"]),o=O(()=>tt({size:e.size,move:e.move,bar:i.value})),d=O(()=>n.value[i.value.offset]**2/t.wrapElement[i.value.scrollSize]/e.ratio/s.value[i.value.offset]),v=k=>{var $;if(k.stopPropagation(),k.ctrlKey||[1,2].includes(k.button))return;($=window.getSelection())==null||$.removeAllRanges(),b(k);const P=k.currentTarget;P&&(u.value[i.value.axis]=P[i.value.offset]-(k[i.value.client]-P.getBoundingClientRect()[i.value.direction]))},x=k=>{if(!s.value||!n.value||!t.wrapElement)return;const $=Math.abs(k.target.getBoundingClientRect()[i.value.direction]-k[i.value.client]),P=s.value[i.value.offset]/2,le=($-P)*100*d.value/n.value[i.value.offset];t.wrapElement[i.value.scroll]=le*t.wrapElement[i.value.scrollSize]/100},b=k=>{k.stopImmediatePropagation(),c=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",_),g=document.onselectstart,document.onselectstart=()=>!1},w=k=>{if(!n.value||!s.value||c===!1)return;const $=u.value[i.value.axis];if(!$)return;const P=(n.value.getBoundingClientRect()[i.value.direction]-k[i.value.client])*-1,le=s.value[i.value.offset]-$,Ce=(P-le)*100*d.value/n.value[i.value.offset];t.wrapElement[i.value.scroll]=Ce*t.wrapElement[i.value.scrollSize]/100},_=()=>{c=!1,u.value[i.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",_),M(),m&&(f.value=!1)},r=()=>{m=!1,f.value=!!e.size},S=()=>{m=!0,f.value=c};Te(()=>{M(),document.removeEventListener("mouseup",_)});const M=()=>{document.onselectstart!==g&&(document.onselectstart=g)};return se(oe(t,"scrollbarElement"),"mousemove",r),se(oe(t,"scrollbarElement"),"mouseleave",S),(k,$)=>(y(),H(de,{name:h(l).b("fade"),persisted:""},{default:z(()=>[F(L("div",{ref_key:"instance",ref:n,class:B([h(l).e("bar"),h(l).is(h(i).key)]),onMousedown:x},[L("div",{ref_key:"thumb",ref:s,class:B(h(l).e("thumb")),style:ne(h(o)),onMousedown:v},null,38)],34),[[ce,k.always||f.value]])]),_:1},8,["name"]))}});var ge=q(st,[["__file","thumb.vue"]]);const ot=W({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),nt=T({__name:"bar",props:ot,setup(a,{expose:e}){const t=a,l=X(me),n=p(0),s=p(0),u=p(""),f=p(""),c=p(1),m=p(1);return e({handleScroll:o=>{if(o){const d=o.offsetHeight-R,v=o.offsetWidth-R;s.value=o.scrollTop*100/d*c.value,n.value=o.scrollLeft*100/v*m.value}},update:()=>{const o=l==null?void 0:l.wrapElement;if(!o)return;const d=o.offsetHeight-R,v=o.offsetWidth-R,x=d**2/o.scrollHeight,b=v**2/o.scrollWidth,w=Math.max(x,t.minSize),_=Math.max(b,t.minSize);c.value=x/(d-x)/(w/(d-w)),m.value=b/(v-b)/(_/(v-_)),f.value=w+R<d?`${w}px`:"",u.value=_+R<v?`${_}px`:""}}),(o,d)=>(y(),C(A,null,[E(ge,{move:n.value,ratio:m.value,size:u.value,always:o.always},null,8,["move","ratio","size","always"]),E(ge,{move:s.value,ratio:c.value,size:f.value,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var rt=q(nt,[["__file","bar.vue"]]);const it=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:$e([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),ut={scroll:({scrollTop:a,scrollLeft:e})=>[a,e].every(j)},ct="ElScrollbar",dt=T({name:ct}),vt=T({...dt,props:it,emits:ut,setup(a,{expose:e,emit:t}){const l=a,n=te("scrollbar");let s,u;const f=p(),c=p(),m=p(),g=p(),i=O(()=>{const r={};return l.height&&(r.height=pe(l.height)),l.maxHeight&&(r.maxHeight=pe(l.maxHeight)),[l.wrapStyle,r]}),o=O(()=>[l.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!l.native}]),d=O(()=>[n.e("view"),l.viewClass]),v=()=>{var r;c.value&&((r=g.value)==null||r.handleScroll(c.value),t("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))};function x(r,S){fe(r)?c.value.scrollTo(r):j(r)&&j(S)&&c.value.scrollTo(r,S)}const b=r=>{j(r)&&(c.value.scrollTop=r)},w=r=>{j(r)&&(c.value.scrollLeft=r)},_=()=>{var r;(r=g.value)==null||r.update()};return ae(()=>l.noresize,r=>{r?(s==null||s(),u==null||u()):({stop:s}=Ne(m,_),u=se("resize",_))},{immediate:!0}),ae(()=>[l.maxHeight,l.height],()=>{l.native||G(()=>{var r;_(),c.value&&((r=g.value)==null||r.handleScroll(c.value))})}),Be(me,Se({scrollbarElement:f,wrapElement:c})),ue(()=>{l.native||G(()=>{_()})}),Pe(()=>_()),e({wrapRef:c,update:_,scrollTo:x,setScrollTop:b,setScrollLeft:w,handleScroll:v}),(r,S)=>(y(),C("div",{ref_key:"scrollbarRef",ref:f,class:B(h(n).b())},[L("div",{ref_key:"wrapRef",ref:c,class:B(h(o)),style:ne(h(i)),onScroll:v},[(y(),H(Ae(r.tag),{id:r.id,ref_key:"resizeRef",ref:m,class:B(h(d)),style:ne(r.viewStyle),role:r.role,"aria-label":r.ariaLabel,"aria-orientation":r.ariaOrientation},{default:z(()=>[re(r.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),r.native?ve("v-if",!0):(y(),H(rt,{key:0,ref_key:"barRef",ref:g,always:r.always,"min-size":r.minSize},null,8,["always","min-size"]))],2))}});var ft=q(vt,[["__file","scrollbar.vue"]]);const mt=ke(ft),pt=W({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),_t=W({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),ht=T({name:"ElSkeletonItem"}),gt=T({...ht,props:_t,setup(a){const e=te("skeleton");return(t,l)=>(y(),C("div",{class:B([h(e).e("item"),h(e).e(t.variant)])},[t.variant==="image"?(y(),H(h(He),{key:0})):ve("v-if",!0)],2))}});var ee=q(gt,[["__file","skeleton-item.vue"]]);const bt=T({name:"ElSkeleton"}),yt=T({...bt,props:pt,setup(a,{expose:e}){const t=a,l=te("skeleton"),n=Qe(oe(t,"loading"),t.throttle);return e({uiLoading:n}),(s,u)=>h(n)?(y(),C("div",_e({key:0,class:[h(l).b(),h(l).is("animated",s.animated)]},s.$attrs),[(y(!0),C(A,null,Z(s.count,f=>(y(),C(A,{key:f},[s.loading?re(s.$slots,"template",{key:f},()=>[E(ee,{class:B(h(l).is("first")),variant:"p"},null,8,["class"]),(y(!0),C(A,null,Z(s.rows,c=>(y(),H(ee,{key:c,class:B([h(l).e("paragraph"),h(l).is("last",c===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):ve("v-if",!0)],64))),128))],16)):re(s.$slots,"default",Re(_e({key:1},s.$attrs)))}});var wt=q(yt,[["__file","skeleton.vue"]]);const St=ke(wt,{SkeletonItem:ee});Ie(ee);function kt(a){let e;const t=p(!1),l=Se({...a,originalPosition:"",originalOverflow:"",visible:!1});function n(o){l.text=o}function s(){const o=l.parent,d=i.ns;if(!o.vLoadingAddClassList){let v=o.getAttribute("loading-number");v=Number.parseInt(v)-1,v?o.setAttribute("loading-number",v.toString()):(J(o,d.bm("parent","relative")),o.removeAttribute("loading-number")),J(o,d.bm("parent","hidden"))}u(),g.unmount()}function u(){var o,d;(d=(o=i.$el)==null?void 0:o.parentNode)==null||d.removeChild(i.$el)}function f(){var o;a.beforeClose&&!a.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(c,400),l.visible=!1,(o=a.closed)==null||o.call(a))}function c(){if(!t.value)return;const o=l.parent;t.value=!1,o.vLoadingAddClassList=void 0,s()}const m=T({name:"ElLoading",setup(o,{expose:d}){const{ns:v,zIndex:x}=Ve("loading");return d({ns:v,zIndex:x}),()=>{const b=l.spinner||l.svg,w=V("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",...b?{innerHTML:b}:{}},[V("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),_=l.text?V("p",{class:v.b("text")},[l.text]):void 0;return V(de,{name:v.b("fade"),onAfterLeave:c},{default:z(()=>[F(E("div",{style:{backgroundColor:l.background||""},class:[v.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[V("div",{class:v.b("spinner")},[w,_])]),[[ce,l.visible]])])})}}}),g=Oe(m),i=g.mount(document.createElement("div"));return{...Me(l),setText:n,removeElLoadingChild:u,close:f,handleAfterLeave:c,vm:i,get $el(){return i.$el}}}let U;const Et=function(a={}){if(!we)return;const e=zt(a);if(e.fullscreen&&U)return U;const t=kt({...e,closed:()=>{var n;(n=e.closed)==null||n.call(e),e.fullscreen&&(U=void 0)}});xt(e,e.parent,t),be(e,e.parent,t),e.parent.vLoadingAddClassList=()=>be(e,e.parent,t);let l=e.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",e.parent.setAttribute("loading-number",l),e.parent.appendChild(t.$el),G(()=>t.visible.value=e.visible),e.fullscreen&&(U=t),t},zt=a=>{var e,t,l,n;let s;return Ee(a.target)?s=(e=document.querySelector(a.target))!=null?e:document.body:s=a.target||document.body,{parent:s===document.body||a.body?document.body:s,background:a.background||"",svg:a.svg||"",svgViewBox:a.svgViewBox||"",spinner:a.spinner||!1,text:a.text||"",fullscreen:s===document.body&&((t=a.fullscreen)!=null?t:!0),lock:(l=a.lock)!=null?l:!1,customClass:a.customClass||"",visible:(n=a.visible)!=null?n:!0,target:s}},xt=async(a,e,t)=>{const{nextZIndex:l}=t.vm.zIndex||t.vm._.exposed.zIndex,n={};if(a.fullscreen)t.originalPosition.value=D(document.body,"position"),t.originalOverflow.value=D(document.body,"overflow"),n.zIndex=l();else if(a.parent===document.body){t.originalPosition.value=D(document.body,"position"),await G();for(const s of["top","left"]){const u=s==="top"?"scrollTop":"scrollLeft";n[s]=`${a.target.getBoundingClientRect()[s]+document.body[u]+document.documentElement[u]-Number.parseInt(D(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])n[s]=`${a.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=D(e,"position");for(const[s,u]of Object.entries(n))t.$el.style[s]=u},be=(a,e,t)=>{const l=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?J(e,l.bm("parent","relative")):he(e,l.bm("parent","relative")),a.fullscreen&&a.lock?he(e,l.bm("parent","hidden")):J(e,l.bm("parent","hidden"))},Y=Symbol("ElLoading"),ye=(a,e)=>{var t,l,n,s;const u=e.instance,f=o=>fe(e.value)?e.value[o]:void 0,c=o=>{const d=Ee(o)&&(u==null?void 0:u[o])||o;return d&&p(d)},m=o=>c(f(o)||a.getAttribute(`element-loading-${je(o)}`)),g=(t=f("fullscreen"))!=null?t:e.modifiers.fullscreen,i={text:m("text"),svg:m("svg"),svgViewBox:m("svgViewBox"),spinner:m("spinner"),background:m("background"),customClass:m("customClass"),fullscreen:g,target:(l=f("target"))!=null?l:g?void 0:a,body:(n=f("body"))!=null?n:e.modifiers.body,lock:(s=f("lock"))!=null?s:e.modifiers.lock};a[Y]={options:i,instance:Et(i)}},Ct=(a,e)=>{for(const t of Object.keys(e))De(e[t])&&(e[t].value=a[t])},Lt={mounted(a,e){e.value&&ye(a,e)},updated(a,e){const t=a[Y];e.oldValue!==e.value&&(e.value&&!e.oldValue?ye(a,e):e.value&&e.oldValue?fe(e.value)&&Ct(e.value,t.options):t==null||t.instance.close())},unmounted(a){var e;(e=a[Y])==null||e.instance.close(),a[Y]=null}},Tt=()=>{ie.alert("期待搜索服务器返回0, 但是服务器返回了其他值. 服务器部署错误?","遇到了错误 :(")},$t={props:{title:{required:!0,type:String},url:{required:!0,type:String},content:{required:!0,type:String},matchers:{required:!0,type:Array}}},Nt={style:{margin:"0",padding:"0"}},Bt=L("div",{style:{margin:"2.5%"}},null,-1);function Pt(a,e,t,l,n,s){const u=Fe,f=ze,c=Je;return y(),C(A,null,[E(c,{shadow:"hover"},{header:z(()=>[E(u,{type:"primary",href:t.url,target:"_blank"},{default:z(()=>[L("h1",Nt,I(t.title),1)]),_:1},8,["href"])]),footer:z(()=>[E(u,{type:"info",href:t.url,target:"_blank"},{default:z(()=>[Q(I(t.url)+" -- 来源于 ",1)]),_:1},8,["href"]),L("p",null,I(t.matchers),1)]),default:z(()=>[E(f,{size:"large"},{default:z(()=>[Q(I(t.content),1)]),_:1})]),_:1}),Bt],64)}const xe=Ze($t,[["render",Pt]]),At=L("h1",null,"「聚」合搜索",-1),Ht=L("div",{style:{"margin-top":"2.5%"}},null,-1),Rt={components:{SearchResult:xe}},jt=Object.assign(Rt,{__name:"Home",setup(a){const e="Home page",t=p("搜一些什么吧..."),l=p(""),n=p("「聚」合搜索"),s=p([]),u=p(!1),f=X("$store"),c=X("axios"),m=We();ue(()=>{N(e,"Home Page mounted.")});const g=async()=>{const i=new Date;N(e,"开始搜索..."),n.value="🔍 开始搜索喽!";const o=setTimeout(()=>{Ue({title:"...",message:"搜索时间好像有点久了.. 是不是出现了错误? 前去控制台查看吧!",position:"bottom-right",type:"info"}),n.value="🔍 搜索时间过长, 去控制台看看有什么错误吧..."},3e3);if(K.value==null||K.value==null){ie.alert("请先配置服务器地址!","错误 :("),n.value="😵 服务器地址没有配置...",u.value=!1,m.push("/firstuse");return}if(!f.state.is_server_alive){ie.alert("请先等待服务器检查完成!","错误 :("),u.value=!1,n.value="😵 先等待服务器配置完成, 好吗?....",m.push("/error/server");return}N(e,"服务器检查完毕"),u.value=!0;const d=(await c.get(K.value+"/matcher/all")).data;if(d.code!=0&&!f.state.is_server_alive){Tt(),clearTimeout(o),u.value=!1,m.push("/error/server");return}s.value=[];var v=0;d.data.matchers.forEach(async b=>{N(e,`Matcher -> ${b}`);let w=K.value+"/matcher/"+b+"/query/"+l.value;N(e,`Api Addr -> ${w}`),c.get(w).then(async _=>{N(e,"Start Matcher -> "+b),_.data.data.result.forEach(r=>{if(r.includes(null)){Ye(e,"A null result in search result");return}var S=!1;s.value.forEach(M=>{if(r[1]==M[1]){N(e,"重复, continue!"),M[3].push(b),S=!0;return}}),!S&&(r.push([b]),s.value.push(r))})})}),N(e,u.value),v=(new Date().getTime()-i.getTime())/1e3,clearTimeout(o),n.value=`😎 Done! (在${v}秒内通过${d.data.matchers.length}不同的搜索引擎搜索了以上结果!)`,u.value=!1};return(i,o)=>{const d=Ge,v=Xe,x=Ke,b=St,w=mt,_=ze,r=Lt;return y(),C("div",null,[At,E(d),E(x,{size:"large",placeholder:t.value,onKeyup:qe(g,["enter"]),modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=S=>l.value=S),disabled:u.value},{append:z(()=>[F((y(),H(v,{onClick:g},{default:z(()=>[Q(I(u.value?"搜索中...":"搜索"),1)]),_:1})),[[r,u.value]])]),_:1},8,["placeholder","modelValue","disabled"]),Ht,L("div",null,[E(w,null,{default:z(()=>[(y(!0),C(A,null,Z(s.value,S=>(y(),H(xe,{title:S[0],content:S[2],url:S[1],matchers:S[3]},null,8,["title","content","url","matchers"]))),256)),(y(),C(A,null,Z(1,S=>E(de,{name:"el-fade-in"},{default:z(()=>[F(E(b,{style:{"margin-top":"2.5%"},rows:5,animated:""},null,512),[[ce,u.value]])]),_:1})),64))]),_:1})]),L("div",null,[E(d),E(_,{type:"info"},{default:z(()=>[Q(I(n.value),1)]),_:1})])])}}});export{jt as default};
